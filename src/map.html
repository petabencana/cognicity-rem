<template>

  <require from="leaflet/leaflet.css"></require>
  <require from="./styles.css"></require>

  <div class="map">

    <!-- Error Message Box -->
    <div if.bind="error" class="alert alert-danger" role="alert">
      <span class="sr-only">Error:</span>
      ${error}
    </div>

    <loading-indicator loading.bind="loading"></loading-indicator>

    <!-- Map -->
    <div id="mapContainer" style="height:${mapHeight}px;"></div>

    <div class="btn-toolbar">
      <div class="row">
        <div class="col-md-2 text-left"></div>
        <div class="col-md-8 text-center">
          <div class="btn-group">
            <button click.delegate="refreshFloodStates()" class="btn btn-primary">Refresh Flood States</button>
            <button type="button" class="btn btn-danger">Clear Flood States</button>
          </div>
        </div>
        <div class="col-md-2 text-right">
          <div class="pull-right" style="visibility: ${refreshing ? 'visible' : 'hidden'}">
            <img class="spinner" src="assets/icons/spinner.svg"/>
          </div>
        </div>
      </div>
    </div>

    <!-- Data Table -->
    <div id="tableContainer" style="overflow-y: scroll; height:${tableHeight}px;">
      <table class="table table-striped" aurelia-table="data.bind: floodAreas; display-data.bind: $floodAreas">
        <thead>
          <tr>
            <th class="col-md-1">ID</th>
            <th class="col-md-2">Name</th>
            <th class="col-md-1">Reports</th>
            <th class="col-md-8">Local Areas</th>
          </tr>
        </thead>
        <tbody>
          <tr repeat.for="area of $floodAreas">
            <td>
              <a data-toggle="collapse" href="#localAreas${$index}" aria-expanded="false" aria-controls="localAreas${$index}">
                ${$index}
              </a>
            </td>
            <td>${area.name}</td>
            <td>0</td>
            <td>
              <div class="collapse" id="localAreas${$index}">
                  TODO: Local Area Details
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Pagination -->
    <!--<div class="row">
      <div class="col-md-12">
        <aut-pagination current-page.bind="currentPage" page-size.bind="pageSize" total-items.bind="totalItems"
        pagination-size.bind="5" boundary-links.bind="true"> </aut-pagination>
      </div>
    </div>-->

  </div>
</template>
